{% block stylesheets %}

    <link href="{{ asset('assets/css/bootstrap-datepicker.css') }}"  rel="stylesheet" />
    <link href="{{ asset('assets/bootstrap3/css/bootstrap.css') }}"  rel="stylesheet" />
    <link href="{{ asset('assets/bootstrap3/js/bootstrap.js') }}"  rel="stylesheet" />
    <script src="{{ asset('assets/js/jquery-1.10.2.js') }}" ></script>
    <link href="{{ asset('assets/css/ct-navbar.css') }}"  rel="stylesheet" />

    <script src="{{ asset('assets/js/bootstrap-datepicker.js') }}"></script>

{% endblock %}


{% block body %}

<div class="wrapper ">
    <div class="content">

        <div class="section section-features">
            <div class="">
                <div class="col-md-8 col-sm-offset-2">

                    <div class="card card-blue" >
                        <div class="card-header" data-background-color="purple">
                            <h6 class="title text-center">Registro de maraton</h6>
                            <h6 class="category text-center">Complete los campos obligatorios</h6>
                        </div>
                        <br><br>

                        <div class="card-content">
                            {{ form_start(form) }}
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Nombre <span class="text-danger">*</span></label>
                                            {{ form_widget(form.nombre, { 'attr': {'class':'form-control'}})}}

                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Apellido <span class="text-danger">*</span></label>
                                            {{ form_widget(form.apellido, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">DNI <span class="text-danger">*</span></label>
                                            {{ form_widget(form.dni, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                </div>
                                <div class="row text-center">
                                    {#<div class="col-md-4">#}
                                        {#<div class="form-group label-floating">#}
                                            {#<label class="control-label">Fecha de nacimiento</label>#}
                                            {#{{ form_widget(form.fechaNacimiento, { 'attr': {'class':'datepicker'}})}}#}
                                        {#</div>#}
                                    {#</div>#}
                                    <div class="col-md-4">
                                        <div class="form-group label-floating text-center">
                                            <label class="control-label">Fecha de nacimiento <span class="text-danger">*</span></label>
                                            {{ form_widget(form.fechaNacimiento, {attr: {
                                                'class': "datepicker form-control" } ,
                                            })
                                            }}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Sexo<span class="text-danger">*</span></label>
                                            {{ form_widget(form.sexo, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating text-center">
                                            <label class="control-label">Categoria edad <span class="text-danger">*</span></label>
                                            {{ form_widget(form.rangedate, { 'attr': {'class':'form-control text-center'}})}}
                                        </div>
                                    </div>

                                </div>
                            <div>


                                <span class="add-on">
                                    <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
                                </span>
                            </div>
                                <div class="row text-center">
                                    <div class="col-md-6">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Telefono<span class="text-danger">*</span></label>
                                            {{ form_widget(form.telefono, { 'attr': {'class':'form-control', }})}}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Telefono de emergencia </label>
                                            {{ form_widget(form.telEmergencia, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                </div>
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Pais <span class="text-danger">*</span></label>
                                            {{ form_widget(form.pais, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label id="pro" class="control-label">Provincia <span class="text-danger">*</span></label>
                                            <select name="provincia" id="appbundle_corredor_provincia" class="form-control">
                                                <option value></option>
                                                <option value="6">CÃ³rdoba</option>
                                                <option value="2">Capital Federal</option>
                                                <option value="3">Catamarca</option>
                                                <option value="4">Chaco</option>
                                                <option value="5">Chubut</option>
                                                <option value="1">Buenos Aires</option>
                                                <option value="7">Corrientes</option>
                                                <option value="8">Entre Rios</option>
                                                <option value="9">Formosa</option>
                                                <option value="10">Jujuy</option>
                                                <option value="11">La Pampa</option>
                                                <option value="12">La Rioja</option>
                                                <option value="13">Mendoza</option>
                                                <option value="14">Misiones</option>
                                                <option value="15">Neuquen</option>
                                                <option value="16">Rio Negro</option>
                                                <option value="17">Salta</option>
                                                <option value="18">San Juan</option>
                                                <option value="19">San Luis</option>
                                                <option value="20">Santa Cruz</option>
                                                <option value="21">Santa Fe</option>
                                                <option value="22">Santiago Del Estero</option>
                                                <option value="23">Tierra del Fuego</option>
                                                <option value="24">Tucuman</option>

                                            </select>

                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label id="lo" class="control-label">Localidad <span class="text-danger">*</span></label>
                                            {{ form_widget(form.ciudad, { 'attr': {'class':'form-control'}})}}

                                        </div>
                                    </div>
                                </div>
                                <div class="row text-center">
                                    <div class="col-md-6">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Talle <span class="text-danger">*</span></label>
                                            {{ form_widget(form.talle, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Email<span class="text-danger">*</span></label>
                                            {{ form_widget(form.email, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>

                                </div>
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Â¿Posee alguna discapacidad? <span class="text-danger">*</span></label>
                                            {{ form_widget(form.tipocarrera, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">

                                            <label class="control-label">Distancia <span class="text-danger">*</span></label>
                                            {{ form_widget(form.distancia, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Forma de pago<span class="text-danger">*</span></label>
                                            {{ form_widget(form.formapago, { 'attr': {'class':'form-control'}})}}
                                        </div>
                                    </div>
                                </div>
                            <br>
                            <br>
                            <div class="row">
                                    <div class="col-md-6">
                                        <a  class="btn btn-primary col-md-6 pull-left"href="{{ path('homepage') }}">Volver al menu</a>

                                    </div>
                                <input  class="btn btn-success col-md-4 pull-right" type="submit" value="Registrar" />

                            </div>
                          

                                <div class="clearfix"></div>
                            {{ form_end(form) }}

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block javascripts %}

    <script type="text/javascript">
        $('.datepicker').datepicker({

            format: 'dd/mm/yyyy',
            viewMode: 'years',
            minDate: 0

        });


        $(document).ready(function ( ) {
            document.getElementById('appbundle_corredor_provincia').disabled=true;
            document.getElementById('appbundle_corredor_ciudad').disabled=true;

            $('#appbundle_corredor_pais').change(function () {
                var pais=$('#appbundle_corredor_pais option:selected').val();

                if (pais != 13){
                    document.getElementById('appbundle_corredor_provincia').disabled=true;
                    document.getElementById('appbundle_corredor_ciudad').disabled=true;


                }
                else{
                    document.getElementById('appbundle_corredor_provincia').disabled=false;


                }
            })
        });

        $(document).ready(function ( ) {
            $('#appbundle_corredor_provincia').change(function () {
                var selectedoption=$('#appbundle_corredor_provincia option:selected').val();
                console.log(selectedoption);
                $.ajax({
                    type: "POST",
                    url: "{{ path ("seleccion_provincia") }}",
                    data: { option: selectedoption}
                }).done(function (data){
                    var json_string = JSON.stringify(data);
                    var obj = $.parseJSON(json_string);
                    var list = $('.corredor_ciudad');
                    list.empty();

                    html = "";
                    for(var key in obj) {
                        html += "<option value=" + obj[key].id + ">" +obj[key].nombre + "</option>"
                    }
                    document.getElementById('appbundle_corredor_ciudad').disabled=false;
                    document.getElementById("appbundle_corredor_ciudad").innerHTML = html;
                });

            })
        });





    </script>
{% endblock %}
